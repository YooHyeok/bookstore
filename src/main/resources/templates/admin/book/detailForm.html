<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">
<head th:replace="fragments/common :: head('board - 콘아롱 책방')"/>
<body>
<div id='wrap'>
	<section>
		<div class="container" th:replace="fragments/common :: menu('adminBook')"/>
		<main role="main" class="container pt-4">
			<div class="container" data-aos="fade-up">
				<h3 class="pb-1 font-italic">Product Details</h3>

				<div class="form-row">
					<div class="col-lg-4 col-md-6 pb-3 form-group">
						<p class="my-1">책 이미지</p>
						<img class="form-control" id="thumbnail_container" th:src="'/files/' + ${bookDto.thumbnailName}" style="max-width: 100%; height: 250px;">
					</div>
					<div class="col-lg-4 col-md-6 pb-3 form-group">
						<p class="my-1">분류</p>
						<input type="text" class="form-control" th:if="${bookDto.type.toString() == 'DOMESTIC'}" value="국내도서" readonly>
						<input type="text" class="form-control" th:if="${bookDto.type.toString() == 'INTERNATIONAL'}" value="외국도서" readonly>
					</div>
				</div>

				<div class="form-row">
					<div class="col-lg-4 col-md-6 pb-3 form-group">
						<p class="my-1">제목</p>
						<input type="text" class="form-control" th:value="${bookDto.title}" readonly>
					</div>
					<div class="col-lg-4 col-md-6 pb-3 form-group">
						<p class="my-1">부제목</p>
						<input type="text" class="form-control" th:value="${bookDto.subTitle}" readonly>
					</div>
					<div class="col-lg-4 col-md-6 pb-3 form-group">
						<p class="my-1">저자</p>
						<input type="text" class="form-control" th:value="${bookDto.author}" readonly>
					</div>
					<div class="col-lg-4 col-md-6 pb-3 form-group">
						<p class="my-1">수량</p>
						<input type="number" class="form-control" th:value="${bookDto.quantity}" readonly>
					</div>
					<div class="col-lg-4 col-md-6 pb-3 form-group">
						<p class="my-1">출판사</p>
						<input type="text" class="form-control" th:value="${bookDto.publisher}" readonly>
					</div>
					<div class="col-lg-4 col-md-6 pb-3 form-group">
						<p class="my-1">발행일</p>
						<input type="date" class="form-control" th:value="${bookDto.publishedDate}" readonly>
					</div>
					<div class="col-lg-4 col-md-6 pb-3 form-group">
						<p class="my-1">가격</p>
						<input type="number" class="form-control" th:value="${bookDto.price}" readonly>
					</div>
					<div class="col-lg-4 col-md-6 pb-3 form-group">
						<p class="my-1">할인율</p>
						<input type="number" class="form-control" th:value="${bookDto.disRate}" readonly>
					</div>
					<div class="col-lg-4 col-md-6 pb-3 form-group">
						<p class="my-1">할인가</p>
						<input type="number" class="form-control" th:value="${bookDto.disPrice}" readonly>
					</div>
					<div class="col-lg-4 col-md-6 pb-3 form-group">
						<p class="my-1">배송비</p>
						<input type="text" class="form-control" th:if="${bookDto.shippingFee == 0}" value="무료배송" readonly>
						<input type="text" class="form-control" th:unless="${bookDto.shippingFee == 0}" th:value="|${bookDto.shippingFee}원|" readonly>
					</div>
				</div>

					<div class="pb-5 text-right">
						<a class="btn btn mr-2 mb-2 btn-outline-secondary" th:href="@{/admin/book}" >목록으로</a>
						<a class="btn btn mr-2 mb-2 btn-outline-primary" th:href="@{/admin/book/edit/{bookId}(bookId=${bookDto.id})}" >수정하기</a>
						<a class="btn btn-outline-danger" th:if="${auth_uid} == *{bookDto.writer}" th:onclick="|deletePost(${boardDto.id})|" >삭제하기</a>
					</div>
				</form>
			</div>
		</main>
	</section>
	<footer th:replace="fragments/common :: footer"/>
</div>
</body>
<script>
    /* 책 삭제 api */
    function deletePost(boardId) {
        // DELETE /board/delete/{boardId}
        $.ajax({
            url: '/api/board/' + boardId,
            type: 'DELETE',
            success: function (){
                alert('삭제 되었습니다');
                window.location.href = '/board';
            },
            error: function (){
                alert("문제발생");
            }
        });
    };
</script>
</html>